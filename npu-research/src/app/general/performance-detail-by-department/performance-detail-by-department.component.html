<div
  class="contain-content bg-gray-100 px-2 md:px-10 text-xl md:text-2xl text-[#394250] font-bold"
>
  <div class="mx-auto md:py-6">
    <h1 class="text-3xl">
      รายละเอียดข้อมูลของ{{ department?.major }} ({{
        reportType === "article"
          ? "บทความ/วารสาร"
          : reportType === "research"
          ? "โครงการวิจัย"
          : "นวัตกรรมสิ่งประดิษฐ์"
      }})
    </h1>
  </div>

  <div class="mx-auto px-2 md:px-6 py-2 md:py-6 bg-white rounded-xl md:mb-10 mt-2">
    <div>
      <table class="min-w-full border-collapse">
        <thead class="bg-[#394250] text-white px-4">
          <tr>
            <th class="text-start px-4 py-2">#</th>
            <th class="text-start px-4 py-2">ชื่อสาขา</th>
            <th class="px-4 py-2">จำนวน</th>
          </tr>
        </thead>

        <tbody class="bg-gray-200 border-b border-gray-300 font-medium">
          <tr
            class="border-b border-gray-300"
            *ngFor="let d of paginatedMajors; let i = index"
          >
            <td class="px-4 py-2">
              {{ (currentPage - 1) * pageSize + i + 1 }}
            </td>
            <td class="px-4 py-2">
              <div class="truncate text-wrap">
                {{ d.branch_name }}
              </div>
            </td>
            <td class="text-center px-4 py-2">
              {{
                reportType === "research"
                  ? d.research
                  : reportType === "article"
                  ? d.article
                  : d.innovation
              }}
            </td>
          </tr>

          <tr *ngIf="filteredMajors.length === 0">
            <td colspan="6" class="text-center p-4 text-gray-500">
              ไม่พบข้อมูล
            </td>
          </tr>

          <tr class="bg-gray-100 font-semibold">
            <td colspan="2" class="text-right p-3">รวมทั้งหมด</td>
            <td class="text-center p-3">{{ totalAll }}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <div
      class="flex flex-col mt-2 md:mt-4 md:gap-2 md:flex-row md:justify-between md:items-center"
    >
      <p class="text-xl font-medium">
        หน้า {{ currentPage }} จาก {{ totalPages }}
      </p>
      <p class="text-xl font-medium">
        แสดง {{ paginatedMajors.length }} รายการ จาก
        {{ filteredMajors.length }} รายการ
      </p>

      <div class="flex justify-end space-x-1">
        <button
          (click)="changePage(currentPage - 1)"
          [disabled]="currentPage === 1"
          class="px-2 md:px-3 py-1 rounded border text-sm disabled:opacity-40 hover:bg-gray-100 cursor-pointer"
        >
          ‹
        </button>
        <button
          *ngFor="let page of pages"
          (click)="changePage(page)"
          class="px-2 md:px-3 py-1 rounded border text-sm disabled:opacity-40 hover:bg-gray-100 cursor-pointer"
          [ngClass]="{
            'bg-[#FACC15] text-[#394250]': currentPage === page,
            'hover:bg-gray-100': currentPage !== page
          }"
        >
          {{ page }}
        </button>
        <button
          (click)="(currentPage + 1)"
          [disabled]="currentPage === totalPages"
          class="px-2 md:px-3 py-1 rounded border text-sm disabled:opacity-40 hover:bg-gray-100 cursor-pointer"
        >
          ›
        </button>
      </div>
    </div>
  </div>
</div>
