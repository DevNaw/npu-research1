<div class="contain-content bg-gray-100 p-3">
    <div class="max-w-7xl mx-auto px-6 py-6 bg-white rounded-xl">
      <div class="mt-5">
        <h1 class="text-3xl font-semibold">เอกสารดาวน์โหลด</h1>
  
        <div
          class="flex flex-col md:flex-row md:justify-between md:items-center mt-3 gap-3"
        >
          <!-- Buttons -->
          <div class="flex gap-2">
            <button
              (click)="openAddModal()"
              class="flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-1 rounded-md text-lg cursor-pointer"
            >
              <i class="bi bi-plus-circle"></i> เพิ่มเอกสาร
            </button>
          </div>
  
          <!-- Search -->
          <div class="flex items-center">
            <label class="text-xl mr-2">Search:</label>
            <input
              type="text"
              [(ngModel)]="searchText"
              (input)="onSearch()"
              class="border border-gray-300 rounded text-xl px-2 py-1"
              placeholder="ค้นหา..."
            />
          </div>
        </div>
      </div>
  
      <div class="w-full overflow-x-auto mt-4" id="print-section">
        <table class="w-full border overflow-hidden text-xl">
          <thead>
            <tr class="bg-[#FACC15] text-[#1E293B] border-b">
              <th class="p-3 border-r text-center">ลำดับ</th>
              <th class="p-3 pl-6 text-left border-r">
                ชื่อเอกสาร
              </th>
              <th class="p-3 pl-6 text-center w-35">จัดการข้อมูล</th>
            </tr>
          </thead>
  
          <tbody>
            <tr
              *ngFor="let doc of filteredDocument; let i = index"
              class="border-b hover:bg-gray-50"
            >
              <td class="p-3 text-center border-r">
                {{ (currentPage - 1) * pageSize + i + 1 }}
              </td>
  
              <td class="p-3 pl-6 border-r font-medium">
                {{ doc.name }}
              </td>
  
              <td class="p-3 text-center border-r">
                <div class="flex justify-center items-center gap-2 flex-wrap">
                  <button
                    class="inline-flex items-center justify-center w-9 h-9 rounded-full
                           bg-blue-50 hover:bg-blue-100 text-blue-600 transition
                           cursor-pointer"
                    title="แก้ไข"
                    (click)="openEditModal(doc, i)"
                  >
                    <i class="bi bi-pencil-square"></i>
                  </button>
                
                  <button
                    class="inline-flex items-center justify-center w-9 h-9 rounded-full
                           bg-red-50 hover:bg-red-100 text-red-600 transition
                           cursor-pointer"
                    title="ลบ"
                    (click)="deleteDocument(i)"
                  >
                    <i class="bi bi-trash3"></i>
                  </button>
                </div>
              </td>
            </tr>
  
            <!-- ไม่พบข้อมูล -->
            <tr *ngIf="filteredDocument.length === 0">
              <td colspan="5" class="text-center p-4 text-gray-500">
                ไม่พบข้อมูล
              </td>
            </tr>
          </tbody>
        </table>
      </div>
  
      <div
        class="flex flex-col md:flex-row md:justify-between md:items-center mt-4 gap-2"
      >
        <p class="text-xl text-gray-600">
          หน้า {{ currentPage }} จาก {{ totalPages }}
        </p>
  
        <p class="text-xl text-gray-500">
          แสดง {{ paginatedDocument.length }} รายการ จาก
          {{ documents.length }} รายการ
        </p>
  
        <div class="flex justify-end mt-3 space-x-1">
          <button
            (click)="changePage(currentPage - 1)"
            [disabled]="currentPage === 1"
            class="px-3 py-1 rounded border text-sm disabled:opacity-40 hover:bg-gray-100"
          >
            ‹
          </button>
  
          <button
            *ngFor="let page of [].constructor(totalPages); let i = index"
            (click)="changePage(i + 1)"
            class="px-3 py-1 rounded border text-sm transition"
            [ngClass]="{
              'bg-[#FACC15] text-[#1E293B]': currentPage === i + 1,
              'hover:bg-gray-100': currentPage !== i + 1
            }"
          >
            {{ i + 1 }}
          </button>
  
          <button
            (click)="changePage(currentPage + 1)"
            [disabled]="currentPage === totalPages"
            class="px-3 py-1 rounded border text-sm disabled:opacity-40 hover:bg-gray-100"
          >
            ›
          </button>
        </div>
      </div>
    </div>
  </div>
  
  <!-- ===== Modal ===== -->
  <div
    *ngIf="showModal"
    class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 px-4"
    (click)="closeModal()"
  >
    <div
      class="bg-white rounded-xl w-full max-w-lg p-6 max-h-[90vh] overflow-y-auto"
      (click)="$event.stopPropagation()"
    >
      <!-- Title -->
      <h2 class="text-3xl font-semibold mb-4 text-center md:text-left">
        {{ modalMode === 'add' ? 'เพิ่มเอกสาร' : 'แก้ไขเอกสาร' }}
      </h2>
  
      <!-- ชื่อสาขา -->
      <div class="mb-4">
        <label class="block mb-1 text-2xl font-medium">ชื่อเอกสาร</label>
        <input
          type="text"
          [(ngModel)]="newDocument.name"
          class="w-full border rounded-md px-3 text-xl py-2 focus:ring focus:ring-blue-200"
          placeholder="กรอกชื่อเอกสาร"
        />
      </div>
  
      <!-- รายละเอียด -->
      <div class="mb-4">
        <label class="block mb-1 font-medium text-2xl">ไฟล์เอกสาร</label>
        <input
          type="file"
          [(ngModel)]="newDocument.fileUrl"
          class="w-full border rounded-md px-3 py-2 text-xl focus:ring focus:ring-blue-200"
          placeholder="กรอกไฟล์เอกสาร"
        />
      </div>
  
      <!-- Buttons -->
      <div class="flex flex-col sm:flex-row justify-end gap-2 text-xl">
        <button
          (click)="closeModal()"
          class="w-full sm:w-auto px-4 py-2 rounded-md border hover:bg-gray-100"
        >
          ยกเลิก
        </button>
  
        <button
          (click)="modalMode === 'add' ? saveDocument() : updateDocument()"
          class="w-full sm:w-auto px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700"
        >
          {{ modalMode === 'add' ? 'บันทึก' : 'อัปเดต' }}
        </button>
      </div>
    </div>
  </div>
  